webpackJsonp([1],[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=new Set,n=new Map,a=new Map,o=0;o<e.length;o++){var r=e[o].room;a.set(r,e[o]);var i=r.split("-"),l=i.shift(),s=i.join("-");t.add(l),n.has(l)||n.set(l,[]),n.get(l).push(s)}var c={info:a};return c.unit=Array.from(t).sort(function(e,t){return Number(e)>Number(t)?1:-1}),c.room={},n.forEach(function(e,t){c.room[t]=e.sort(function(e,t){var n=e.split("-"),a=t.split("-");return Number(n[0])>Number(a[0])?1:Number(n[1])>Number(a[1])?1:-1})}),c}n(5);var r=n(10),i=a(r),l=n(29),s=a(l),c=n(12),u=a(c),d=n(3);$.ajax({url:"/home/frontLogin.json",dataType:"json",async:!1,success:function(e){if(e.success){var t=e.data;t.serverTime=new Date(t.serverTime),t.roomInfo=o(t.homeUsers),window.loginInfo=t}}});var p=window.loginInfo;window._global={time:p.serverTime};var f=React.createClass({displayName:"Page",getInitialState:function(){return{}},componentDidMount:function(){var e=this;window._menu_react_obj=this,setInterval(function(){var t=window.loginInfo.serverTime;t.setSeconds(t.getSeconds()+1),e.forceUpdate()},1e3)},logout:function(){$.ajax({type:"GET",url:"/system/logout.json",success:function(e){e.success?location.href="./login.html":d.global.error(e.message)}})},render:function(){var e=this;React.createElement(Menu,{mode:"horizontal",defaultSelectedKeys:["1"],style:{background:"rgba(0, 0, 0, 0)","border-bottom":"15px solid rgb(3, 137, 170)","margin-top":18}},React.createElement(Menu.Item,{key:"1",style:{background:"url("+n(32)+") no-repeat","background-size":"100% 100%","border-bottom":"0",margin:"0",height:50,width:300}}," "),React.createElement(Menu.Item,{key:"2",style:{background:"url("+n(33)+") no-repeat","background-size":"100% 100%","border-bottom":"0",margin:"0",height:40,width:180}}," "),React.createElement(Menu.Item,{key:"3",style:{background:"url("+n(33)+") no-repeat","background-size":"100% 100%","border-bottom":"0",margin:"0",height:40,width:180}}," "));return React.createElement(Layout,{className:"layout"},React.createElement(Layout.Header,{style:{background:"rgba(0, 0, 0, 0)",height:10}},React.createElement("div",{style:{position:"absolute",right:80,top:10,"font-weight":"bold"}},React.createElement("div",{style:{height:16,"line-height":16}},"值班安排信息:"),React.createElement("div",{style:{height:16,"line-height":16}},"值班员:",p.duty.name),React.createElement("div",{style:{height:16,"line-height":16}},"电话:",p.duty.phone),React.createElement("div",{style:{height:16,"line-height":16}},"时间:",d.Date.format(p.serverTime,"yyyy/MM/dd hh:mm:ss")))),React.createElement(Layout.Content,{style:{padding:"0 50px"}},React.createElement(Tabs,{defaultActiveKey:"1"},React.createElement(Tabs.TabPane,{key:"1",style:{"padding-top":10},tab:React.createElement("div",{style:{background:"url("+n(32)+") no-repeat","background-size":"100% 100%","border-bottom":"0",margin:"0",height:50,width:300}})},React.createElement(i.default,null)),React.createElement(Tabs.TabPane,{key:"2",style:{"padding-top":100},tab:React.createElement("div",{style:{background:"url("+n(33)+") no-repeat","background-size":"100% 100%","border-bottom":"0",margin:"0",height:40,width:180}})},React.createElement(s.default,null)))),React.createElement(Layout.Footer,{style:{textAlign:"center"}},"中国深圳市亿万家智能家居公司",React.createElement("div",{style:{float:"right"}},React.createElement(Dropdown,{overlay:React.createElement(Menu,null,React.createElement(Menu.Item,null,React.createElement("a",{href:"#",onClick:function(){e.refs.changePwd.open()}},React.createElement(Icon,{type:"key"}),React.createElement("span",{style:{paddingLeft:10}},"修改密码"))),React.createElement(Menu.Item,null,React.createElement("a",{href:"#",onClick:this.logout},React.createElement(Icon,{type:"logout"}),React.createElement("span",{style:{paddingLeft:10}},"退出")))),style:{float:"right"}},React.createElement("a",{href:"#"},React.createElement(Icon,{type:"setting"}),"更多操作")),React.createElement(u.default,{ref:"changePwd",okText:"确定",onOk:function(e){d.ajax.sendForm(e.form,{url:"/home/user/changePwd.json",successText:"修改成功",successCall:function(){e.close()}})},title:"修改密码",template:{labelCol:{span:4},items:[{label:"原密码",field:{binder:{id:"password",rules:"required"},control:{type:"password"}}},{label:"新密码",field:{binder:{id:"newPassword",rules:"required"},control:{type:"password"}}},{label:"再次确认",field:{binder:{id:"confirmPassword",rules:"required"},control:{type:"password"}}}]}}))))}});ReactDOM.render(React.createElement(f,null),$("#app")[0])},,,,,function(e,t){},,,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=a(o),i=n(11),l=a(i);n(23);var s=React.createClass({displayName:"Out",hold:{roomInfoFit:{}},getInitialState:function(){var e=window.loginInfo.roomInfo,t=$.extend(!0,{},e),n=0;this.hold.roomInfoFit=t;for(var a=1;a<5;a++)if(t.unit.length>a){var o=t.unit[a-1];t.room[o].length>n&&(n=t.room[o].length)}else t.unit.push("_"+a),t.room["_"+a]=[];for(name in t.room)for(var r=n-t.room[name].length;r>0;)t.room[name].push("_"),r--;return{roomInfo:e,unit:void 0,time:window.loginInfo.serverTime}},componentDidMount:function(){},chooseUint:function(e){this.setState({unit:e})},render:function(){var e=this,t=window.loginInfo;return React.createElement(Row,{type:"flex"},React.createElement(Col,{span:"12",style:{background:"url("+n(25)+") no-repeat","background-size":"100% 100%",padding:"0px 15px"}},React.createElement(Row,{style:{position:"absolute",left:"5%",top:-15,width:"90%",height:30,background:"url("+n(26)+") no-repeat","background-size":"100% 100%"},type:"flex",justify:"space-between"},React.createElement(Col,{span:"8",style:{"text-align":"left",color:"white","font-size":14,"line-height":30}},React.createElement("div",{style:{paddingLeft:15}},t.community," 小区信息列表")),React.createElement(Col,{span:"14",style:{"text-align":"right",color:"white","line-height":30}},React.createElement("div",{style:{paddingRight:15,display:"none"}},r.default.Date.format(this.state.time,"yyyy/MM/dd hh:mm"),"  今日接警人员:",t.duty.name))),React.createElement(l.default,{style:{height:508,"margin-top":14}})),React.createElement(Col,{span:"12",style:{background:"url("+n(25)+") no-repeat","background-size":"100% 100%",padding:"0px 15px"}},React.createElement(Row,{style:{position:"absolute",left:"5%",top:-15,width:"90%",height:30,background:"url("+n(26)+") no-repeat","background-size":"100% 100%"},type:"flex",justify:"space-between"},React.createElement(Col,{span:"8",style:{"text-align":"left",color:"white","font-size":14,"line-height":30}},React.createElement("div",{style:{paddingLeft:15}},t.community," 小区信息列表")),React.createElement(Col,{span:"14",style:{"text-align":"right",color:"white","line-height":30}},React.createElement("div",{style:{paddingRight:15,display:"none"}},r.default.Date.format(this.state.time,"yyyy/MM/dd hh:mm"),"  今日值班人员:",t.duty.name))),React.createElement(Row,{style:{width:"90%",height:55,margin:"0 auto",paddingTop:10}},React.createElement(Col,{style:{"text-align":"left","font-size":14,"line-height":45}},React.createElement("img",{style:{"margin-top":"10",float:"left"},src:n(27)}),React.createElement("div",{style:{float:"left",color:"rgb(1, 173, 216)",paddingLeft:5}},"快速查询 :"),React.createElement(AutoComplete,{style:{float:"left","margin-top":"10",paddingLeft:5,width:40},dataSource:this.state.roomInfo.unit,onChange:this.chooseUint}),React.createElement("div",{style:{float:"left",color:"rgb(1, 173, 216)",paddingLeft:5}},"栋"),React.createElement(AutoComplete,{style:{float:"left","margin-top":"10",paddingLeft:5,width:100},dataSource:this.state.roomInfo.room[this.state.unit]}))),React.createElement("div",{style:{width:"92%",margin:"0 auto"}},React.createElement("ul",{style:{"white-space":"nowrap",overflow:"auto",height:470}},this.hold.roomInfoFit.unit.map(function(t,a){return React.createElement("li",{style:{display:"inline-block",width:"20%",height:"100%","vertical-align":"top"}},function(){var n={display:"inline-block",width:"100%",background:"rgb(3, 137, 170)",height:"28","padding-left":10,color:"white","font-size":16,"line-height":28};return 0==a?$.extend(n,{"border-radius":"10px 0px 0px 10px"}):a==e.hold.roomInfoFit.unit.length-1&&$.extend(n,{"border-radius":"0px 10px 10px 0px"}),React.createElement("div",{style:n}," ",t.startsWith("_")?"":t+" 栋")}(),React.createElement("ul",{style:{border:"1px dashed  #ccc","border-width":"0 1px"}},e.hold.roomInfoFit.room[t].map(function(a){return React.createElement("li",{style:{padding:"8px 0px 8px 10px"}},function(){return a.startsWith("_")?React.createElement("div",{style:{height:22}}):React.createElement(Popover,{placement:"right",content:React.createElement("div",null,React.createElement("div",null,"姓名 : ",e.state.roomInfo.info.get(t+"-"+a).name),React.createElement("div",null,"电话 : ",e.state.roomInfo.info.get(t+"-"+a).phone)),title:"业主信息",trigger:"hover"},React.createElement("img",{style:{height:12},src:n(28)}),React.createElement("font",{style:{height:22,"padding-left":10,"line-height":22}},t+"栋-"+a))}())})))})))))}});t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(12),l=a(i),s=n(3),c=a(s),u=React.createClass({displayName:"PageTable",hold:{defaultHandleMsg:"已处理",defaultHandleMsgColor:"#d0d0d0",chooseRow:{}},getInitialState:function(){return{currentPageNo:1,msgColor:this.hold.defaultHandleMsgColor}},componentDidMount:function(){var e=this;this.load(1),setInterval(function(){e.reload(!1)},1e4)},handleOpen:function(e){this.hold.chooseRow=e,this.refs.handleForm.open()},handle:function(e){var t=this,n=e.getForm(),a=$.extend({id:this.hold.chooseRow.id},n.getFieldsValue()),o="/home/alarm/handle.json";c.default.ajax.sendForm(n,{url:o,data:a,successText:"处理成功",successCall:function(){e.close(),t.reload()}})},load:function(e,t){t!==!1&&this.setState({loading:!0});var n="/home/alarm/frontPagination.json",a={pageNo:e,sizePerPage:20};$.ajax({url:n,dataType:"json",data:a,success:function(t){t.success&&(this.playSound(t.data.extra.hasAlarm),this.setState(t.data),this.setState({currentPageNo:e,loading:!1}))}.bind(this)})},reload:function(e){var t=this.state.currentPageNo;this.load(t,e)},enteringHandleMsg:function(e){var t=$(e.target);t.val()==this.hold.defaultHandleMsg?$(e.target).css("color",this.hold.defaultHandleMsgColor):$(e.target).css("color","")},playSound:function(e){var t=window.navigator.userAgent.toLowerCase();if(t.indexOf("ie")>=0)if(e){var a='<embed name="embedPlay"  autostart="true" hidden="true" loop="true"></embed>';$("body").find("embed").length<=0&&$("body").append(a);var o=document.embedPlay;o.src=n(21),o.volume=100}else{var o=document.embedPlay;o&&(o.pause(),delete document.embedPlay);var o=$("body").find("embed");o.length>=0&&o.remove()}else{var r="<audio id='audioPlay'   hidden='true' loop='true'>";$("body").find("audio").length<=0&&$("body").append(r);var i=document.getElementById("audioPlay");i.src=n(21),e?i.play():i.pause()}},render:function(){var e=this,t=o(this.props,[]),a=this.state,i={current:a.currentPageNo,total:a.totalCount,pageSize:20,showQuickJumper:!0,onChange:function(e){this.load(e)}.bind(this),showTotal:function(e){var t=(a.currentPageNo-1)*a.pageSize+1+"~"+(a.currentPageNo*a.pageSize<a.totalCount?a.currentPageNo*a.pageSize:a.totalCount)+"/"+e;return t}};t.loading=a.loading;var s=[{dataIndex:"",render:function(e){return"unsolved"==e.status.itemCode?React.createElement("div",null,React.createElement("img",{style:{height:10},src:n(22)}),React.createElement("font",{color:"red",style:{"padding-left":6}},"【报警中】")):React.createElement("div",null,React.createElement("font",{color:"grey",style:{"padding-left":16}},"【正常】"))}},{title:"房间",dataIndex:"room"},{title:"报警类型",dataIndex:"type.itemName"},{title:"报警时间",dataIndex:"alarmTime"},{title:"状态",dataIndex:"status.itemName"},{title:"",dataIndex:"",render:function(t){return"unsolved"==t.status.itemCode?React.createElement("a",{href:"#",onClick:e.handleOpen.bind(e,t)},"处理"):React.createElement(Popover,{placement:"bottom",content:React.createElement("div",null,React.createElement("div",null,"处理时间 : ",t.handleTime),React.createElement("div",null,"处理备注 : ",t.handleMessage)),title:"处理情况",trigger:"click"},React.createElement("a",{href:"#"},"查看"))}}];return React.createElement("div",null,React.createElement(Table,r({pagination:i,bordered:!1,columns:s,dataSource:a.result,size:"small",rowClassName:function(){return"alertTable"}},t)),React.createElement(l.default,{ref:"handleForm",okText:"确定",onOk:this.handle,title:"报警处理",template:{labelCol:{span:4},items:[{label:"处理备注",field:{binder:{id:"handleMessage",rules:[{required:!0,message:"必填"}],initialValue:this.hold.defaultHandleMsg},control:{type:"textarea",placeholder:"请录入备注信息",style:{color:this.state.msgColor},onChange:this.enteringHandleMsg}}}]}}))}});t.default=u},function(e,t,n){function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};o=function(e,t,o){var i=n(13),l=React.createClass({displayName:"FormModal",getDefaultProps:function(){return{maskClosable:!1,okText:"保存"}},getInitialState:function(){return{orginData:{},visible:!1}},close:function(){this.setState({visible:!1}),this.refs.form.getForm().resetFields(),$.isFunction(this.props.onCancel)&&this.props.onCancel()},getForm:function(){return this.refs.form.getForm()},getOrginData:function(){return this.state.orginData},open:function(e){var t=this,n=this;this.setState({visible:!0},function(){var a=n.refs.form.getForm();e?(a.setFieldsValue(e),t.state.orginData=e):a.resetFields()})},onOk:function(){var e=!1,t=this.refs.form.getForm();t.validateFieldsAndScroll(function(t,n){t||(e=!0)}),e&&($.isFunction(this.props.onOk)?(this.form=t,this.props.onOk(this)):this.close())},render:function(){var e=this.props,t=e.template,n=a(e,["template"]);return React.createElement(Modal,r({},n,{visible:this.state.visible,onCancel:this.close,onOk:this.onOk}),React.createElement(i,r({ref:"form"},t)))}});o.exports=l}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};a=function(e,t,a){function r(e){var t=$.extend({},e);return t.getFieldsValue=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return l(e.getFieldsValue(n.length?n:void 0))},t.getFieldValue=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return l(e.getFieldValue(n.length?n:void 0))},t}var i=n(14),l=n(20),s=React.createClass({displayName:"ZFormTemplate",getDefaultProps:function(){return{items:[],cols:1,labelCol:{span:8},wrapperCol:{span:16}}},getInitialState:function(){return{formProxy:void 0}},componentDidMount:function(){this.state.formProxy=r(this.props.form)},_buildField:function(e){var t=this,n=this.props.form;return React.isValidElement(e)?e:$.isArray(e)?e.map(function(e){return t._buildField(e)}):"string"==typeof e?i(e,n,!0):i(e.binder,e.control,n,!0)},render:function(){var e=this,t=this.props,n=t.items,a=t.cols,o=t.form,r=t.labelCol,l=t.wrapperCol;return React.createElement("div",null,React.createElement(Row,null,n.map(function(t){return void 0==t.field.control||"hidden"!=t.field.control&&"hidden"!=t.field.control.type?React.isValidElement(t)?t:React.createElement(Col,{span:24/a},React.createElement(Form.Item,{label:t.label,labelCol:$.extend({},r,t.labelCol),wrapperCol:$.extend({},l,t.wrapperCol)},e._buildField(t.field))):i(t.field.binder,t.field.control,o)})))}}),c=Form.create({withRef:!0})(s),u=React.createClass({displayName:"Facade",getForm:function(){var e=void 0;return e=this.props.form?this.refs.form:this.refs.form.refs.wrappedComponent.refs.formWrappedComponent,e.state.formProxy},render:function(){return void 0!=this.props.form?React.createElement(s,o({ref:"form"},this.props)):(delete this.props.form,React.createElement(c,o({ref:"form"},this.props)))}});a.exports=u}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(module,exports,__webpack_require__){function _objectWithoutProperties(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var customFields=__webpack_require__(15),transRules=__webpack_require__(18);module.exports=function(binderOpt,controlOpt,form_in,fillFull){var form=form_in;if(!binderOpt)return null;var decoratorOpt=void 0,fieldProps=void 0,simpleTag=!1;controlOpt&&controlOpt.getFieldDecorator?(simpleTag=!0,form=controlOpt,decoratorOpt={id:binderOpt},fieldProps={type:"Input"},form_in&&(fieldProps.style=Object.assign({},{width:"100%"},fieldProps.style))):("string"==typeof controlOpt?fieldProps={type:controlOpt}:(fieldProps=$.extend(!0,{},controlOpt),fieldProps.type||(fieldProps.type="Input")),fillFull&&(fieldProps.style=Object.assign({},{width:"100%"},fieldProps.style)),"string"==typeof binderOpt?decoratorOpt={id:binderOpt}:(decoratorOpt=binderOpt,decoratorOpt.rules&&(decoratorOpt.rules=transRules(decoratorOpt.rules))));var _decoratorOpt=decoratorOpt,id=_decoratorOpt.id,formProps=_objectWithoutProperties(_decoratorOpt,["id"]);if("hidden"==fieldProps.type)return form.getFieldDecorator(id,formProps);if("Checkbox"==fieldProps.type&&(formProps.valuePropName="checked"),!simpleTag&&React.isValidElement(controlOpt))return controlOpt.props.prefixCls&&controlOpt.props.prefixCls.indexOf("checkbox")!=-1&&(formProps.valuePropName="checked"),form.getFieldDecorator(id,formProps)(controlOpt);var Field=void 0;return customFields[fieldProps.type]?(Field=customFields[fieldProps.type],delete fieldProps.type):eval("window.antd."+fieldProps.type)?(Field=eval("window.antd."+fieldProps.type),delete fieldProps.type):Field=Input,form.getFieldDecorator(id,formProps)(React.createElement(Field,fieldProps))}}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(e,t,n){var a;a=function(e,t,a){a.exports={ZUDCSelect:n(16),ZSelect:n(2),CityField:n(17)}}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,n){function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(e,t,o){var l=n(3),s=React.createClass({displayName:"CpUDCSelect",getInitialState:function(){return{children:[],typeCode:this.props.typeCode,emptyTag:!1}},componentDidMount:function(){this.props.options?this.buildOptions(this.props.options):this.loadUdcData()},loadUdcData:function(){var e=this,t=e.state.typeCode;$.get("/common/udc/list.json",{typeCode:t},function(t){t.success&&e.buildOptions(t.data)})},buildOptions:function(e){var t=[];$(e).each(function(e,n){t.push(React.createElement(Option,{value:n.value},n.name))}),this.setState({children:t})},onChange:function e(t){var n="";this.refs.select.props.children.map(function(e,a){e.props.value==t&&(n=e.props.children)});var a=this.props.method,o=void 0;o="GET"==a?t?this.props.typeCode+","+t:void 0:t?{typeCode:this.props.typeCode,itemValue:t,itemName:n}:void 0;var r=this.props.name||this.props.id,i=this.props.form;if(i){var l={};void 0!=t||null!=t?l[r]=o:(l[r]=void 0,this.state.emptyTag=!0),i.setFieldsValue(l)}var e=this.props.onChange;e&&e(o,t)},componentWillUpdate:function(e,t){if(this.props.options){var n=this.props.options,a=e.options;l.Arrays.equal(n,a)||this.buildOptions(a)}},componentDidUpdate:function(e,t){if(this.state.emptyTag){var n=this.props.name||this.props.id,a=this.props.form;if(a){var o={};o[n]=void 0,a.setFieldsValue(o)}this.state.emptyTag=!1}},render:function(){var e=a(this.props,[]),t=e.value||e.defaultValue,n=this.props.method;if("GET"==n&&t&&t.indexOf&&t.indexOf(",")>0){var o=t.split(",")[1];t=$.isNumeric(o)?Number(o):void 0}else"object"==("undefined"==typeof t?"undefined":i(t))&&(t=t.itemValue);return e.value&&(e.value=t),this.state.emptyTag&&(e.value=void 0),e.defaultValue=t,$.isEmptyObject(this.state.children)?React.createElement("div",null):React.createElement("div",null,React.createElement(Select,r({ref:"select"},e,{children:this.state.children,onChange:this.onChange})))}});o.exports=s}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){function a(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};o=function(e,t,n){var o=[],i=React.createClass({displayName:"Field",getInitialState:function(){return{options:o}},componentDidMount:function(){var e=this;this.load(function(t){e.setDefaultValue(),e.props.onLoad&&e.props.onLoad(t)})},setDefaultValue:function(){var e=(this.props,this._defaultValue);if(e&&$.isArray(e)){var t=this.getItemByValueOrText(e);t.length&&this.setState({value:[t[0].value,t[1].value]})}},load:function(e){var t="https://www.yiji.com/anon/common/getAllDistrict.htm";if(this.state.options.length)return e(o),o;var n=this;$.ajax({url:t,dataType:"jsonp",type:"post",success:function(t){o=n.transOptions(t.data),n.setState({options:o}),e&&e(o)}})},transOptions:function(e){var t=e.childs[0].childs||{},n=[],a=this.props.useText;return $.each(t,function(e,t){var o={value:a?t.branchDistrictName:t.branchDistrictNo,label:t.branchDistrictName,branchDistrictNo:t.branchDistrictNo},r=t.childs.map(function(e){return{value:a?e.branchDistrictName:e.branchDistrictNo,label:e.branchDistrictName,branchDistrictNo:e.branchDistrictNo}});o.children=r,n.push(o)}),n},getItemByValueOrText:function(e){for(var t=[],n=this.state.options,a=0;a<n.length;a++){var o=n[a];if(o.label==e[0]||o.value==e[0]){t[0]=o;for(var r=0;r<o.children.length;r++){var i=o.children[r];if(i.label==e[1]||i.value==e[1]){t[1]=i;break}}break}}return t},render:function(){this.isMounted()||(this._defaultValue=this.defaultValue||this.props.defaultValue||this.props.value||this.value);var e=this.props,t=e.onChange,n=a(e,["onChange"]);return n.onChange=function(e,n){void 0!=n&&0!=n.length||(n.push({}),n.push({})),t&&t.call(this,e,[n[0].label,n[1].label],n)},React.createElement(Cascader,r({placeholder:"请选择省市",allowClear:!1,options:this.state.options},n))}});n.exports=i}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var a;a=function(e,t,a){var o=n(19);a.exports=function(e){return e?($.isArray(e)||(e=[e]),e=e.map(function(e){var t={};return t="string"==typeof e?{type:e}:e,o[t.type]&&(t={validator:o[t.type]}),"required"==t.type&&(t.required=!0,t.message||(t.message="必填")),t})):[]}}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,n){function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(e,t,n){var o={addMethod:function(e,t){if(1==arguments.length){var n=arguments[0];return"object"!=("undefined"==typeof n?"undefined":r(n))&&console.error("addMethod参数不正确"),void $.each(n,function(e,t){o.addMethod(e,t)})}o[e]=function(e,n,a){return n?void t.apply(this,arguments):void a()}}};o.addMethod({email:function(e,t,n){var a=/^[^@]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i;a.test(t)?n():n("请输入正确的邮箱地址")},number:function(e,t,n){var a=/^((0\.\d+)|([1-9][0-9]*(\.\d+)?))$/;a.test(t)?n():n("请输入正确的整数或小数")},integer:function(e,t,n){var a=/^(0|([\+\-]?([1-9]\d*)))$/;a.test(t)?n():n("请输入整数")},int:function(e,t,n){o.integer.apply(this,arguments)},signInt:function(e,t,n){var a=/^[1-9]\d*$/;a.test(t)?n():n("请输入正整数")},mobile:function(e,t,n){var a=/^1\d{10}$/g;a.test(t)?n():n("请输入正确的手机号码")},phone:function(e,t,n){var a=/^(0\d{2,4}-?)?\d{8}$/;a.test(t)?n():n("请输入正确的座机电话号码")},phoneOrMobile:function(e,t,n){var a=this,r="请输入手机号码或电话号码";o.phone.call(this,e,t,function(i){i?o.mobile.call(a,e,t,function(e){e?n(r):n()}):n()})},noSpace:function(e,t,n){var a=/^[^\s]+$/;a.test(t)?n():n("不能包含空格")},zh:function(e,t,n){var a=/^[\u4e00-\u9fa5]+$/;a.test(t)?n():n("请输入中文")},noZh:function(e,t,n){var a=/^[^\u4e00-\u9fa5]+$/;a.test(t)?n():n("不能包含中文字符")},remote:function(e,t,n,o){is.string(e)&&(e={url:e});var r=o.field,i=$.extend(a({},r,t),e.data||{});$.ajax($.extend(!0,{dataType:"json"},e,{data:i,success:function(t){var a;a=e.success?e.success.apply(this,arguments):t.success?null:t.message||"远程校验未通过",a?n(a):n()}}))},ID:function(e,t,n){var a,o="请输入正确的身份证号码";if(/^\d{15}$/.test(t)){var r=parseInt(t.substr(6,2))+1900,i=t.substr(8,2),l=t.substr(10,2);return a=is.dateString(i+"/"+l+"/"+r),void(a?n():n(o))}var s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],c=[1,0,"X",9,8,7,6,5,4,3,2];if(/^\d{17}\d|x$/i.test(t)){var r=parseInt(t.substr(6,4)),i=t.substr(10,2),l=t.substr(12,2);if(a=is.dateString(i+"/"+l+"/"+r),!a)return void n(o);for(var u,d=0,p=0;p<t.length-1;p++)d+=parseInt(t.substr(p,1),10)*s[p];u=d%11,a=c[u]==t.substr(17,1).toUpperCase()}else a=!1;a?n():n(o)}}),n.exports=o}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var a;a=function(e,t,n){function a(e){for(var t in e){var n=e[t];n=$.isArray(n)?$.map(n,function(e){return o(e)}):o(n),e[t]=n}return e}function o(e){return"undefined"!=typeof e&&null!==e||(e=""),e._isAMomentObject&&(e=e.format("YYYY-MM-DD HH:mm:ss")),e}n.exports=function(e){return a(e)}}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,n){e.exports=n.p+"c2c0d5058284fc3f250c8cd11c3f967c.wav"},function(e,t,n){e.exports=n.p+"images/alert_803bbddd726062cd1944cd1e9ddb9702.png"},function(e,t){},,function(e,t,n){e.exports=n.p+"images/bg2_74cd901a3ad72b544e1316c40edc5c71.png"},function(e,t,n){e.exports=n.p+"images/bar_47d28898d86e298323a223f5c29fd9cd.png"},function(e,t,n){e.exports=n.p+"images/search_374f96ac5e76b41c3e8d8ccadf352097.png"},function(e,t,n){e.exports=n.p+"images/watch_b3c09c04a1667a3dc8da29bf3ffc90a5.png"},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),r=a(o),i=React.createClass({displayName:"Out",getInitialState:function(){return{}},componentDidMount:function(){},render:function(){return React.createElement(Row,{type:"flex",justify:"center"},React.createElement(Col,{span:"12",style:{background:"url("+n(25)+") no-repeat","background-size":"100% 100%",padding:"0px 15px"}},React.createElement(Row,{style:{position:"absolute",left:"5%",top:-15,width:"90%",height:30,background:"url("+n(26)+")no-repeat","background-size":"100% 100%"},type:"flex",justify:"space-between"},React.createElement(Col,{span:"8",style:{"text-align":"left",color:"white","font-size":14,"line-height":30}},React.createElement("div",{style:{paddingLeft:15}},"值班人员信息")),React.createElement(Col,{span:"14",style:{"text-align":"right",color:"white","line-height":30}},React.createElement("div",null))),React.createElement("div",{style:{"margin-top":18}},React.createElement(r.default,null))))}});t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(12),d=a(u),p=n(31),f=a(p),h=n(3),m=a(h),g=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.chooseDuty=function(e,t){if(1!=t.active&&e.target.checked&&t){for(var a=n.state.result,o=0;o<a.length;o++)a[o].id==t.id?a[o].active=1:a[o].active=0;t.active=1,window.loginInfo.duty.name=t.name,window.loginInfo.duty.phone=t.phone,clearTimeout(n.state.chooseDutyTiming),n.state.chooseDutyTiming=setTimeout(function(){m.default.ajax.send({url:"/home/duty/active.json",data:{id:t.id},silent:!0,stringify:!1})},3e3)}},n.columns=[{title:"值班",dataIndex:"active",width:"20%",render:function(e,t,a){return React.createElement("input",{type:"radio",name:"duty_radio",checked:1==e,onClick:function(e){n.chooseDuty(e,t)}})}},{title:"姓名",dataIndex:"name",width:"30%",render:function(e,t,a){return React.createElement("div",{style:{height:30,width:"80%",fontSize:12,lineHeight:"30px"}},n.renderColumns(n.state.data,a,"name",e))}},{title:"电话",dataIndex:"phone",width:"30%",render:function(e,t,a){return React.createElement("div",{style:{height:30,width:"80%",fontSize:12,lineHeight:"30px"}},n.renderColumns(n.state.data,a,"phone",e))}},{title:"操作",dataIndex:"operation",render:function(e,t,a){var o=n.state.data[a].name.editable;return React.createElement("div",{className:"editable-row-operations"},o?React.createElement("span",null,React.createElement("a",{onClick:function(){return n.editDone(a,"save")}},"保存"),React.createElement("a",{onClick:function(){return n.editDone(a,"cancel")},style:{"padding-left":20}},"取消")):React.createElement("span",null,React.createElement("a",{onClick:function(){return n.edit(a)}},"修改"),React.createElement(Popconfirm,{title:"确认删除?",onConfirm:function(){return n.delete(t.id)}},React.createElement("a",{style:{"padding-left":20}},"删除"))))}}],n.rowSelection={type:"radio",onSelect:n.chooseDuty},n.state={chooseDutyTiming:void 0,currentPageNo:1},n}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.load(1,!0)}},{key:"load",value:function(e,t){t!==!1&&this.setState({loading:!0});var n="/home/duty/frontPagination.json",a={pageNo:e,sizePerPage:5};$.ajax({url:n,dataType:"json",data:a,success:function(t){if(t.success){var n=Object.assign(t.data,{currentPageNo:e,loading:!1});n.data=t.data.result.map(function(e){var t={};return Object.keys(e).forEach(function(n){t[n]={value:e[n]}}),t}),this.setState(n)}}.bind(this)})}},{key:"reload",value:function(e){var t=this.state.currentPageNo;this.load(t,e)}},{key:"renderColumns",value:function(e,t,n,a){var o=this,r=e[t][n],i=r.editable,l=void 0!==i&&i,s=r.status;return"undefined"==typeof l?a:React.createElement(f.default,{editable:l,value:a,onChange:function(e){return o.handleChange(n,t,e)},status:s})}},{key:"handleChange",
value:function(e,t,n){var a=this.state.data;a[t][e].value=n,this.setState({data:a})}},{key:"edit",value:function(e){for(var t=this.state.data,n=function(n){Object.keys(t[n]).forEach(function(a){t[n][a]&&(t[n][a].editable=e==n)})},a=0;a<t.length;a++)n(a);this.setState({data:t})}},{key:"editDone",value:function(e,t){var n=this,a=this.state.data;Object.keys(a[e]).forEach(function(n){a[e][n]&&"undefined"!=typeof a[e][n].editable&&(a[e][n].editable=!1,a[e][n].status=t)}),this.setState({data:a},function(){Object.keys(a[e]).forEach(function(t){a[e][t]&&"undefined"!=typeof a[e][t].editable&&delete a[e][t].status}),n.save(e,t)})}},{key:"save",value:function(e,t){var n=this.state.data[e],a={};return Object.keys(n).forEach(function(e){a[e]=n[e].value}),a.name?a.phone?void("save"==t&&m.default.ajax.send({url:"/home/duty/update.json",data:a,successText:"保存成功",successCall:function(){}})):(message.error("电话必须填写"),void this.edit(e)):(message.error("姓名必须填写"),void this.edit(e))}},{key:"delete",value:function(e){var t=this;m.default.ajax.send({url:"/home/duty/delete.json",data:{id:e},stringify:!1,successText:"删除成功",successCall:function(){t.reload()}})}},{key:"add",value:function(e){var t=this;m.default.ajax.sendForm(e.form,{url:"/home/duty/create.json",successText:"添加成功",successCall:function(){if(0==t.state.totalCount){var n=e.form.getFieldsValue();window.loginInfo.duty.name=n.name,window.loginInfo.duty.phone=n.phone}e.close(),t.reload()}})}},{key:"render",value:function(){var e=this,t=o(this.props,[]),n=this.state,a={current:n.currentPageNo,total:n.totalCount,pageSize:5,showQuickJumper:!0,onChange:function(e){this.load(e,!0)}.bind(this),showTotal:function(e){var t=(n.currentPageNo-1)*n.pageSize+1+"~"+(n.currentPageNo*n.pageSize<n.totalCount?n.currentPageNo*n.pageSize:n.totalCount)+"/"+e;return t}};return t.loading=n.loading,React.createElement("div",null,React.createElement(Row,{type:"flex",justify:"end"},React.createElement(Button,{onClick:function(){e.refs.addForm.open()}},"添加")),React.createElement(Table,s({},t,{size:"small",bordered:!1,pagination:a,columns:this.columns,dataSource:n.result})),";",React.createElement(d.default,{ref:"addForm",okText:"确定",onOk:this.add.bind(this),title:"添加值班员",template:{labelCol:{span:4},items:[{label:"姓名",field:{binder:{id:"name",rules:"required"}}},{label:"电话",field:{binder:{id:"phone",rules:"required"}}}]}}))}}]),t}(React.Component);t.default=g},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e){function t(){var e,o,r,i;n(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return o=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={value:r.props.value,editable:r.props.editable||!1},i=o,a(r,i)}return o(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){e.editable!==this.state.editable&&(this.setState({editable:e.editable}),e.editable&&(this.cacheValue=this.state.value)),e.status&&e.status!==this.props.status&&("save"===e.status?this.props.onChange(this.state.value):"cancel"===e.status&&(this.setState({value:this.cacheValue}),this.props.onChange(this.cacheValue)))}},{key:"shouldComponentUpdate",value:function(e,t){return e.editable!==this.state.editable||t.value!==this.state.value}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({value:t})}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.editable;return React.createElement("div",null,a?React.createElement("div",null,React.createElement(Input,{value:n,onChange:function(t){return e.handleChange(t)}})):React.createElement("div",{className:"editable-row-text"},n.toString()||" "))}}]),t}(React.Component);t.default=i},function(e,t,n){e.exports=n.p+"images/menu1_512e3f7dabec06730cb1cfa4741f9906.png"},function(e,t,n){e.exports=n.p+"images/menu2_73ab25bcdac0793edb40d3cfdbc1687d.png"}]);